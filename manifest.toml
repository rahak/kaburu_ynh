packaging_format = 2

id = "kaburu"
name = "Kaburu"
description.en = "Inbound email webhook forwarder with attachment parsing"

version = "1.0~ynh1"

maintainers = []

[upstream]
license = "free"
website = "https://github.com/rahak/kaburu"
code = "https://github.com/rahak/kaburu"

[integration]
yunohost = ">= 11.2"
architectures = "all"
multi_instance = true
ldap = false
sso = false
disk = "50M"
ram.build = "50M"
ram.runtime = "50M"

[install]
    [install.domain]
    type = "domain"
    help.en = "Domain where the email will be received"

    [install.local_part]
    type = "string"
    ask.en = "Email local part (before @)"
    example = "webhook"
    help.en = "The part before @ in your email address"

    [install.webhook_url]
    type = "string"
    ask.en = "Webhook URL"
    example = "https://example.com/webhook"
    help.en = "URL where parsed emails will be sent. Can be relative (e.g., /webhook) or absolute"

    [install.api_secret]
    type = "string"
    ask.en = "API Secret"
    help.en = "Secret key for HMAC signature verification"

    [install.parse_attachments]
    type = "boolean"
    ask.en = "Parse email attachments?"
    default = true
    help.en = "Whether to extract and parse email attachments"

[resources]
    [resources.system_user]
    allow_email = true

    [resources.apt]
    packages = "python3-requests"

[config_panel]
    [config_panel.main]
    name = "Main configuration"

        [config_panel.main.config]
        name = "Configuration"

            [config_panel.main.config.webhook_url]
            ask = "Webhook URL"
            type = "string"
            bind = "webhook_url:/opt/__APP__/config.json"

            [config_panel.main.config.parse_attachments]
            ask = "Parse attachments"
            type = "boolean"
            bind = "parse_attachments:/opt/__APP__/config.json"